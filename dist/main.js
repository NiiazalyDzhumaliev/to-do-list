(()=>{"use strict";const e=document.querySelector("[data-lists]"),t="projects",n="selectedProjectId",d=JSON.parse(localStorage.getItem(t))||[];let a=localStorage.getItem(n);const l=document.getElementById("project-form"),o=()=>{localStorage.setItem(t,JSON.stringify(d)),localStorage.setItem(n,a),p()};e.addEventListener("click",(e=>{"li"===e.target.tagName.toLowerCase()&&(a=e.target.dataset.projectId,o())}));const s=document.getElementById("todolist-form");document.getElementById("list-submit").addEventListener("click",(e=>{const t=document.getElementById("title").value,n=document.getElementById("description").value,l=document.getElementById("date").value,c=document.querySelector("input[name='priority']:checked").value;d.find((e=>e.id===a)).tasks.push(((e,t,n,d)=>({id:Date.now().toString(),title:e,description:t,dueDate:n,prior:d}))(t,n,l,c)),s.reset(),e.preventDefault(),o()})),l&&l.addEventListener("submit",(e=>{const t=document.getElementById("project-name").value;return null==t||""===t||(d.push((e=>({id:Date.now().toString(),name:e,tasks:[]}))(t)),o(),l.reset(),e.preventDefault()),!1}));const c=document.querySelector("[data-lists]"),i=document.querySelector("[data-list-display-container]"),r=document.querySelector("[data-list-title]"),m=document.querySelector("[data-tasks]"),u=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)},p=()=>{u(c),d.forEach((e=>{const t=document.createElement("li");t.dataset.projectId=e.id,t.classList.add("list-name"),t.innerText=e.name,e.id===a&&t.classList.add("active-list"),c.appendChild(t)}));const e=d.find((e=>e.id===a));null==a?i.style.display="none":(i.style.display="",r.innerText=e.name,u(m),(e=>{e.tasks.forEach((e=>{const t=e;delete t.id,Object.values(t).forEach((e=>{const t=document.createElement("ul");t.setAttribute("class","todolist-list"),m.appendChild(t);const n=document.createElement("li");n.innerHTML=e,t.appendChild(n)}))}))})(e))};p()})();