(()=>{"use strict";const e=document.querySelector("[data-lists]"),t="projects",n="selectedProjectId",o=JSON.parse(localStorage.getItem(t))||[];let d=localStorage.getItem(n);const l=document.getElementById("project-form"),a=()=>{localStorage.setItem(t,JSON.stringify(o)),localStorage.setItem(n,d),p()};e.addEventListener("click",(e=>{"li"===e.target.tagName.toLowerCase()&&(d=e.target.dataset.projectId,a())}));const s=document.getElementById("todolist-form");document.getElementById("list-submit").addEventListener("click",(e=>{const t=document.getElementById("title").value,n=document.getElementById("description").value,l=document.getElementById("date").value,c=document.querySelector("input[name='priority']:checked").value;o.find((e=>e.id===d)).tasks.push(((e,t,n,o)=>({id:Date.now().toString(),title:e,description:t,dueDate:n,prior:o}))(t,n,l,c)),s.reset(),e.preventDefault(),a()})),l&&l.addEventListener("submit",(e=>{const t=document.getElementById("project-name").value;return null==t||""===t||(o.push((e=>({id:Date.now().toString(),name:e,tasks:[]}))(t)),a(),l.reset(),e.preventDefault()),!1}));const c=document.querySelector("[data-lists]"),i=document.querySelector("[data-list-display-container]"),r=document.querySelector("[data-list-title]"),m=document.querySelector("[data-tasks]"),u=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)},p=()=>{u(c),o.forEach((e=>{const t=document.createElement("li");t.dataset.projectId=e.id,t.classList.add("list-name"),t.innerText=e.name,e.id===d&&t.classList.add("active-list"),c.appendChild(t)}));const e=o.find((e=>e.id===d));null==d?i.style.display="none":(i.style.display="",r.innerText=e.name,u(m),(e=>{e.tasks.forEach((e=>{for(const t in e){document.querySelector(".todolist");const n=document.createElement("ul");n.setAttribute("class","todolist-list"),m.appendChild(n);const o=document.createElement("li");o.innerHTML=""+e[t],n.appendChild(o)}}))})(e))};p()})();